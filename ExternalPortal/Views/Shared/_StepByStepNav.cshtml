@using Microsoft.Extensions.Configuration
@inject IConfiguration Configuration

@{
    var signupUrl = Configuration.GetValue<string>("AzureAdB2C:SignUpUrl");
}

@model string;
<div id="step-by-step-navigation" class="app-step-nav app-step-nav--large app-step-nav--active" data-show-text="Show"
     data-hide-text="Hide" data-show-all-text="Show all" data-hide-all-text="Hide all">
    <ol class="app-step-nav__steps">
        <li class="app-step-nav__step js-step step-is-shown" id="prepare-to-apply">
            <div class="app-step-nav__header js-toggle-panel" data-position="1">
                <h2 class="app-step-nav__title">
                    <span class="app-step-nav__circle app-step-nav__circle--number">
                        <span class="app-step-nav__circle-inner">
                            <span class="app-step-nav__circle-background">
                                <span class="govuk-visually-hidden">Step</span> 1
                            </span>
                        </span>
                    </span>

                    <span class="js-step-title">
                        Prepare to apply
                    </span>
                </h2>
            </div>

            <div class="app-step-nav__panel js-panel @(Model == "Stage2" ? "" : "js-hidden")" id="step-panel-prepare-to-apply">
                <ol class="app-step-nav__list " data-length="3">
                    <li class="app-step-nav__list-item js-list-item ">
                        <a data-position="1.1" class="app-step-nav__link js-link" href="@UrlKeys.TariffGuaranteeProcess">
                            Tariff guarantee process
                        </a>
                    </li>
                    <li class="app-step-nav__list-item js-list-item ">
                        <a data-position="1.2" class="app-step-nav__link js-link" href="@UrlKeys.ApplyingStageOne">
                            Applying for stage 1
                        </a>
                    </li>
                    <li class="app-step-nav__list-item js-list-item ">
                        <a data-position="1.3" class="app-step-nav__link js-link"
                           href="@UrlKeys.ApplyingStageTwo">Applying for stage 2 </a>
                    </li>
                    <li class="app-step-nav__list-item js-list-item ">
                        <a data-position="1.4" class="app-step-nav__link js-link"
                           href="@UrlKeys.ApplyingStageThree">Applying for stage 3 </a>
                    </li>
                </ol>
            </div>

        </li>

        <li class="app-step-nav__step js-step" id="check-eligibility">
            <div class="app-step-nav__header js-toggle-panel" data-position="2">
                <h2 class="app-step-nav__title">
                    <span class="app-step-nav__circle app-step-nav__circle--number">
                        <span class="app-step-nav__circle-inner">
                            <span class="app-step-nav__circle-background">
                                <span class="govuk-visually-hidden">Step</span> 2
                            </span>
                        </span>
                    </span>

                    <span class="js-step-title">
                        Check eligibility
                    </span>
                </h2>
            </div>

            <div class="app-step-nav__panel js-panel js-hidden" id="step-panel-check-eligibility">
                <ol class="app-step-nav__list " data-length="1">
                    <li class="app-step-nav__list-item js-list-item ">
                        <a data-position="2.1" class="app-step-nav__link js-link" href="@UrlKeys.EligibilityGasInjection">
                            Check the biomethane installation is eligible for the Green Gas Support Scheme
                        </a>
                    </li>
                </ol>
            </div>

        </li>

        <li class="app-step-nav__step js-step" id="create-an-account">
            <div class="app-step-nav__header js-toggle-panel" data-position="3">
                <h2 class="app-step-nav__title">
                    <span class="app-step-nav__circle app-step-nav__circle--number">
                        <span class="app-step-nav__circle-inner">
                            <span class="app-step-nav__circle-background">
                                <span class="govuk-visually-hidden">Step</span> 3
                            </span>
                        </span>
                    </span>

                    <span class="js-step-title">
                        Create an account
                    </span>
                </h2>
            </div>

            <div class="app-step-nav__panel js-panel js-hidden" id="step-panel-create-an-account">
                <ol class="app-step-nav__list " data-length="2">
                    <li class="app-step-nav__list-item js-list-item">
                        <a data-position="3.1" class="app-step-nav__link js-link" href="/register-an-organisation/before-you-apply">Before you create an account</a>
                    </li>
                    <li class="app-step-nav__list-item js-list-item ">
                        @if (User.Identity.IsAuthenticated)
                        {
                            <a data-position="3.2" class="app-step-nav__link js-link" href="/dashboard">Create an account </a>
                        }
                        else
                        {
                            <a data-position="3.2" class="app-step-nav__link js-link" href="@signupUrl">Create an account </a>
                        }
                    </li>
                </ol>
            </div>

        </li>

        <li class="app-step-nav__step js-step" id="apply-for-scheme">
            <div class="app-step-nav__header js-toggle-panel" data-position="2">
                <h2 class="app-step-nav__title">
                    <span class="app-step-nav__circle app-step-nav__circle--number">
                        <span class="app-step-nav__circle-inner">
                            <span class="app-step-nav__circle-background">
                                <span class="govuk-visually-hidden">Step</span> 4
                            </span>
                        </span>
                    </span>

                    <span class="js-step-title">
                        Apply for the Green Gas Support Scheme
                    </span>
                </h2>
            </div>

            <div class="app-step-nav__panel js-panel js-hidden" id="step-panel-gapply-for-scheme">
                <ol class="app-step-nav__list " data-length="1">
                    <li class="app-step-nav__list-item js-list-item ">
                        <a data-position="4.1" class="app-step-nav__link js-link" href="/dashboard">Apply for the Green Gas Support Scheme</a>
                    </li>
                </ol>

                <p class="app-step-nav__paragraph">
                    Ofgem will carry out checks to verify that information provided is
                    accurate.
                </p>
            </div>

        </li>
    </ol>
</div>